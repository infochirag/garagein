var interval,i=1,time=60,initialOffset="440",intr=1100,backFromOtp=1;function LoginOrREg(e){var t="New User! Register Here",r="Already Registered! Login";e.text==t?($("#login-form").hide(),$("#register-form").show(),$("#myModalLabel").html("Register"),e.text=r):e.text==r&&($("#login-form").show(),$("#register-form").hide(),$("#myModalLabel").html("Login"),e.text=t)}function fromOtpToBack(){resetTimer(),$("#login_reg_back").hide(),$("#timer_content").hide(),document.getElementById("timer_id").style.display="",document.getElementById("resend_otp").style.display="none",$("#login_regi_c_id").show(),1==backFromOtp?($("#login-form").show(),$("#register-form").hide()):2==backFromOtp&&($("#login-form").hide(),$("#register-form").show())}function resetTimer(){clearInterval(interval,70),i=1,time=60,initialOffset="440",$(".circle_animation").css("stroke-dashoffset",initialOffset-(i+1)*(initialOffset/time)),$("#otp_timer").text(time)}function openLoginModal(){$("#login-form").show(),$("#register-form").hide(),$("#login-form")[0].reset(),$("#register-form")[0].reset(),$("#otp-form")[0].reset(),$("#otp-form").children(".alert").remove(),$("#login-form").children(".alert").remove(),$("#register-form").children(".alert").remove(),$("#myModalLabel").html("Login"),$("#LoginOrREgId").text("New User! Register Here"),$("#timer_content").hide(),$("#timer_content").hide(),$("#resend_otp").hide(),$("#login_regi_c_id").show(),$("#login_reg_back").hide(),"undefined"!=typeof enquirysubmit&&(enquirysubmit=0),resetTimer(),document.getElementById("timer_id").style.display="",document.getElementById("resend_otp").style.display="none"}function resendOtp(e){$("#resend_otp").hide(),$("#error_div_id").hide(),$.ajax({url:e,success:function(e){if(1==e.status)startCounter();else{var t='<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+e.msg+"</div>";$("form").prepend(t)}}})}function rmSocialLoginData(e){$.ajax({url:e,success:function(e){}})}function callTimer(){$("#timer_content").show(),$("#login_regi_c_id").hide(),interval=setInterval(function(){time-i>=0&&($("#otp_timer").text(time-i),$(".circle_animation").css("stroke-dashoffset",initialOffset-(i+1)*(initialOffset/time))),i==time&&(document.getElementById("timer_id").style.display="none",document.getElementById("resend_otp").style.display=""),i++},intr)}function startCounter(){i=0,setInterval(interval,intr),document.getElementById("resend_otp").style.display="none",document.getElementById("timer_id").style.display=""}$(".mob_number").on("keydown",function(e){return 69!=e.which&&107!=e.which&&109!=e.which&&110!=e.which}),$(".mob_number").on("input",function(e){var t=$(e.target).val();t.length>10&&(t=t.slice(0,10))}),$.validate({form:"#login-form",scrollToTopOnError:!1,onSuccess:function(e){var t=e.attr("data-url"),r="loginMobile="+$("#login-form-mobile").val();return r+="&_token="+$("#login_token").val(),$.ajax({type:"post",url:t,cache:!1,data:r,success:function(t){1==t.status?(backFromOtp=1,$("#login_reg_back").show(),callTimer()):0==t.status&&(e.children(".alert").remove(),e.prepend('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+t.msg+"</div>"))}}),!1}}),$.validate({form:"#otp-form",scrollToTopOnError:!1,onSuccess:function(e){var t=e.attr("data-url"),r="otp="+$("#login-form-otp").val();return r+="&_token="+$("#otp_token").val(),$.ajax({type:"post",url:t,cache:!1,data:r,success:function(t){1==t.status?"undefined"==typeof loggedIn?location.reload():makeLogin():0==t.status&&(e.children(".alert").remove(),e.prepend('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+t.msg+"</div>"))}}),!1}}),$.validate({form:"#register-form",scrollToTopOnError:!1,errorMessagePosition:"top",submitErrorMessageCallback:function(e,t,r){if(t[0]){var i='<span class="help-block form-error">'+t[0]+"</span>";$("#rg_err_container").html(i)}},onSuccess:function(e){var t=e.attr("data-url"),r="registerName="+$("#register-form-name").val();return r+="&registerEmail="+$("#register-form-email").val(),r+="&registerMobile="+$("#register-form-mobile").val(),r+="&_token="+$("#register-form-token").val(),$.ajax({type:"post",url:t,cache:!1,data:r,success:function(t){1==t.status?(backFromOtp=2,$("#login_reg_back").show(),callTimer()):0==t.status&&(e.children(".alert").remove(),e.prepend('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+t.msg+"</div>"))}}),!1}});